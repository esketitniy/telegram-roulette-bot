<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ Telegram Roulette</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .roulette-container {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
        }
        
        .roulette-wheel {
            width: 300px;
            height: 300px;
            border: 10px solid #gold;
            border-radius: 50%;
            margin: 0 auto 30px;
            background: conic-gradient(
                red 0deg 20deg, black 20deg 40deg, red 40deg 60deg, black 60deg 80deg,
                red 80deg 100deg, black 100deg 120deg, red 120deg 140deg, black 140deg 160deg,
                red 160deg 180deg, black 180deg 200deg, red 200deg 220deg, black 220deg 240deg,
                green 240deg 260deg, red 260deg 280deg, black 280deg 300deg, red 300deg 320deg,
                black 320deg 340deg, red 340deg 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: transform 2s ease-out;
        }
        
        .wheel-center {
            width: 60px;
            height: 60px;
            background: #FFD700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            z-index: 10;
        }
        
        .betting-area {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .bet-option {
            background: rgba(255,255,255,0.2);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .bet-option:hover {
            background: rgba(255,255,255,0.3);
            border-color: #FFD700;
            transform: translateY(-2px);
        }
        
        .bet-option.selected {
            background: rgba(255,215,0,0.3);
            border-color: #FFD700;
        }
        
        .bet-red { background: rgba(255,0,0,0.3) !important; }
        .bet-black { background: rgba(0,0,0,0.5) !important; }
        .bet-green { background: rgba(0,255,0,0.3) !important; }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        
        .amount-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        input[type="number"] {
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 16px;
        }
        
        .spin-btn {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255,215,0,0.4);
        }
        
        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            display: none;
        }
        
        .result.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(1800deg); }
        }
        
        .balance {
            background: rgba(255,215,0,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            border: 2px solid #FFD700;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé∞ Telegram Roulette</h1>
        <p>Place your bets and spin the wheel!</p>
    </div>
    
    <div class="roulette-container">
        <div class="balance">
            <h3>üí∞ Balance: $<span id="balance">1000</span></h3>
        </div>
        
        <div class="roulette-wheel" id="wheel">
            <div class="wheel-center" id="result-number">0</div>
        </div>
        
        <div class="betting-area">
            <div class="bet-option bet-red" data-bet="red" data-type="color">
                <h3>üî¥ Red</h3>
                <p>Pays 2:1</p>
            </div>
            
            <div class="bet-option bet-black" data-bet="black" data-type="color">
                <h3>‚ö´ Black</h3>
                <p>Pays 2:1</p>
            </div>
            
            <div class="bet-option bet-green" data-bet="green" data-type="color">
                <h3>üü¢ Green (0)</h3>
                <p>Pays 35:1</p>
            </div>
            
            <div class="bet-option" data-bet="even" data-type="even">
                <h3>üìä Even</h3>
                <p>Pays 2:1</p>
            </div>
            
            <div class="bet-option" data-bet="odd" data-type="odd">
                <h3>üìà Odd</h3>
                <p>Pays 2:1</p>
            </div>
        </div>
        
        <div class="controls">
            <div class="amount-input">
                <label>Bet Amount: $</label>
                <input type="number" id="betAmount" value="10" min="1" max="500">
            </div>
            
            <button class="spin-btn" id="spinBtn">üé≤ SPIN THE WHEEL!</button>
        </div>
        
        <div class="result" id="resultDiv">
            <h3 id="resultText">Result will appear here</h3>
            <p id="resultDetails"></p>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div>üéÆ Games</div>
                <div id="gamesPlayed">0</div>
            </div>
            <div class="stat-item">
                <div>üèÜ Wins</div>
                <div id="wins">0</div>
            </div>
            <div class="stat-item">
                <div>üí∞ Won</div>
                <div>$<span id="totalWon">0</span></div>
            </div>
            <div class="stat-item">
                <div>üìä Win Rate</div>
                <div id="winRate">0%</div>
            </div>
        </div>
    </div>

    <script>
        let balance = 1000;
        let selectedBet = null;
        let selectedBetType = null;
        let gamesPlayed = 0;
        let wins = 0;
        let totalWon = 0;
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.querySelectorAll('.bet-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.bet-option').forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedBet = option.dataset.bet;
                selectedBetType = option.dataset.type;
            });
        });
        
        document.getElementById('spinBtn').addEventListener('click', spinWheel);
        
        async function spinWheel() {
            const betAmount = parseInt(document.getElementById('betAmount').value);
            
            if (!selectedBet) {
                alert('Please select a bet first!');
                return;
            }
            
            if (betAmount > balance) {
                alert('Insufficient balance!');
                return;
            }
            
            if (betAmount < 1) {
                alert('Minimum bet is $1');
                return;
            }
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É
            document.getElementById('spinBtn').disabled = true;
            document.getElementById('resultDiv').classList.remove('show');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            const wheel = document.getElementById('wheel');
            const randomRotation = Math.random() * 360 + 1440; // –ú–∏–Ω–∏–º—É–º 4 –æ–±–æ—Ä–æ—Ç–∞
            wheel.style.transform = `rotate(${randomRotation}deg)`;
            
            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const response = await fetch('/api/spin', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        bet: selectedBet,
                        amount: betAmount,
                        betType: selectedBetType
                    })
                });
                
                const result = await response.json();
                
                // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    showResult(result, betAmount);
                }, 2000);
                
            } catch (error) {
                console.error('Error:', error);
                alert('Network error. Please try again.');
                document.getElementById('spinBtn').disabled = false;
            }
        }
        
        function showResult(result, betAmount) {
            const resultDiv = document.getElementById('resultDiv');
            const resultText = document.getElementById('resultText');
            const resultDetails = document.getElementById('resultDetails');
            const resultNumber = document.getElementById('result-number');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —á–∏—Å–ª–æ –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–æ–ª–µ—Å–∞
            resultNumber.textContent = result.result;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            gamesPlayed++;
            
            if (result.isWin) {
                wins++;
                totalWon += result.winAmount;
                balance = balance - betAmount + result.winAmount;
                
                resultText.innerHTML = `üéâ YOU WIN! üéâ`;
                resultDetails.innerHTML = `
                    Number: ${result.result} (${result.color})<br>
                    Bet: ${result.bet} ($${betAmount})<br>
                    Won: $${result.winAmount}<br>
                    Profit: $${result.winAmount - betAmount}
                `;
                resultDiv.style.background = 'rgba(0,255,0,0.2)';
            } else {
                balance -= betAmount;
                
                resultText.innerHTML = `üòû YOU LOSE üòû`;
                resultDetails.innerHTML = `
                    Number: ${result.result} (${result.color})<br>
                    Bet: ${result.bet} ($${betAmount})<br>
                    Lost: $${betAmount}
                `;
                resultDiv.style.background = 'rgba(255,0,0,0.2)';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            resultDiv.classList.add('show');
            
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –æ–±—Ä–∞—Ç–Ω–æ
            setTimeout(() => {
                document.getElementById('spinBtn').disabled = false;
            }, 1000);
        }
        
        function updateUI() {
            document.getElementById('balance').textContent = balance;
            document.getElementById('gamesPlayed').textContent = gamesPlayed;
            document.getElementById('wins').textContent = wins;
            document.getElementById('totalWon').textContent = totalWon;
            document.getElementById('winRate').textContent = 
                gamesPlayed > 0 ? Math.round((wins / gamesPlayed) * 100) + '%' : '0%';
                
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
            if (balance <= 0) {
                alert('Game Over! You have no money left.');
                document.getElementById('spinBtn').disabled = true;
            }
        }
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function resetGame() {
            balance = 1000;
            gamesPlayed = 0;
            wins = 0;
            totalWon = 0;
            updateUI();
            document.getElementById('spinBtn').disabled = false;
            document.getElementById('resultDiv').classList.remove('show');
            document.getElementById('wheel').style.transform = 'rotate(0deg)';
        }
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ localStorage
        function saveProgress() {
            localStorage.setItem('rouletteProgress', JSON.stringify({
                balance,
                gamesPlayed,
                wins,
                totalWon
            }));
        }
        
        function loadProgress() {
            const saved = localStorage.getItem('rouletteProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                balance = progress.balance || 1000;
                gamesPlayed = progress.gamesPlayed || 0;
                wins = progress.wins || 0;
                totalWon = progress.totalWon || 0;
                updateUI();
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        window.addEventListener('beforeunload', saveProgress);
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', loadProgress);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–±—Ä–æ—Å–∞
        const resetBtn = document.createElement('button');
        resetBtn.textContent = 'üîÑ Reset Game';
        resetBtn.className = 'spin-btn';
        resetBtn.style.background = 'linear-gradient(45deg, #ff6b6b, #ff8e8e)';
        resetBtn.style.marginTop = '10px';
        resetBtn.onclick = resetGame;
        document.querySelector('.controls').appendChild(resetBtn);
    </script>
</body>
</html>
