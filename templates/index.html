<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –†—É–ª–µ—Ç–∫–∞ –û–Ω–ª–∞–π–Ω</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="game-container">
        <!-- –ì–ª–∞–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <div class="game-main">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–≥—Ä–µ -->
            <div class="game-info">
                <div class="info-item">
                    <h3>–†–∞—É–Ω–¥</h3>
                    <p id="roundNumber">1</p>
                </div>
                <div class="info-item">
                    <h3>–°—Ç–∞—Ç—É—Å</h3>
                    <p id="gameStatus" class="status-waiting">–û–∂–∏–¥–∞–Ω–∏–µ</p>
                </div>
                <div class="info-item">
                    <h3>–í—Ä–µ–º—è</h3>
                    <p id="timer">0</p>
                </div>
                <div class="info-item">
                    <h3>–ë–∞–ª–∞–Ω—Å</h3>
                    <p id="userBalance" class="balance-amount">{{ "%.2f"|format(user.balance) }}‚ÇΩ</p>
                </div>
            </div>

            <!-- –†—É–ª–µ—Ç–∫–∞ -->
            <div class="roulette-container">
                <div class="roulette-pointer"></div>
                <div class="roulette-wheel" id="rouletteWheel">
                    <!-- –°–µ–∫—Ç–æ—Ä–∞ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞–≤–æ–∫ -->
            <div class="betting-section">
                <h3>üí∞ –°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É</h3>
                <div class="bet-buttons">
                    <button class="bet-button bet-red" data-bet="red" disabled>
                        <span class="bet-label">–ö—Ä–∞—Å–Ω–æ–µ</span>
                        <span class="bet-multiplier">x2</span>
                    </button>
                    <button class="bet-button bet-black" data-bet="black" disabled>
                        <span class="bet-label">–ß–µ—Ä–Ω–æ–µ</span>
                        <span class="bet-multiplier">x2</span>
                    </button>
                    <button class="bet-button bet-green" data-bet="green" disabled>
                        <span class="bet-label">–ó–µ—Ä–æ</span>
                        <span class="bet-multiplier">x36</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="game-sidebar">
            <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="sidebar-section">
                <h3>üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                <div class="recent-results" id="recentResults">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞ -->
            <div class="sidebar-section">
                <h3>üìà –í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="player-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalBets">-</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —Å—Ç–∞–≤–æ–∫</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="winRate">-</div>
                        <div class="stat-label">–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalWinnings">-</div>
                        <div class="stat-label">–í—ã–∏–≥—Ä–∞–Ω–æ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="netProfit">-</div>
                        <div class="stat-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="sidebar-section">
                <h3>üéÆ –ú–µ–Ω—é</h3>
                <div class="nav-menu">
                    <a href="{{ url_for('profile') }}" class="nav-button">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="{{ url_for('logout') }}" class="nav-button">üö™ –í—ã—Ö–æ–¥</a>
                </div>
            </div>

            <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
            <div class="sidebar-section debug-section" style="display: none;" id="debugSection">
                <h3>üêõ –û—Ç–ª–∞–¥–∫–∞</h3>
                <div class="debug-info">
                    <p>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: <span id="connectionStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></p>
                    <p>–°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã: <span id="debugGameStatus">-</span></p>
                    <button onclick="window.rouletteGame?.debugInfo()" class="debug-btn">–ü–æ–∫–∞–∑–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏</button>
                    <button onclick="window.rouletteGame?.requestGameState()" class="debug-btn">–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏ -->
    <div id="betModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>üí∞ –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏</h3>
            <p>–¢–∏–ø —Å—Ç–∞–≤–∫–∏: <strong id="betType">-</strong></p>
            <div class="form-group">
                <label for="betAmount">–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ (‚ÇΩ):</label>
                <input type="number" id="betAmount" min="1" max="{{ user.balance }}" step="0.01" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            <div class="modal-actions">
                <button id="confirmBet" class="btn-primary">–ü–æ—Å—Ç–∞–≤–∏—Ç—å</button>
                <button class="close btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
    
    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ -->
    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é —Å–µ–∫—Ü–∏—é –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            document.getElementById('debugSection').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            setInterval(() => {
                const statusElement = document.getElementById('connectionStatus');
                const gameStatusElement = document.getElementById('debugGameStatus');
                
                if (window.rouletteGame && statusElement) {
                    statusElement.textContent = window.rouletteGame.socket.connected ? '‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω' : '‚ùå –û—Ç–∫–ª—é—á–µ–Ω';
                    statusElement.style.color = window.rouletteGame.socket.connected ? 'green' : 'red';
                }
                
                if (window.rouletteGame && gameStatusElement) {
                    gameStatusElement.textContent = window.rouletteGame.gameState.status || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                }
            }, 1000);
        }
    </script>
</body>
</html>
